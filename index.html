
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Commande COMO</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f4f4f4;
  margin: 0;
  padding: 10px;
}
h1 {
  text-align: center;
  margin-bottom: 10px;
}
h2 {
  background: #222;
  color: white;
  padding: 6px;
  margin-top: 20px;
  font-size: 16px;
}
table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
  background: white;
}
th, td {
  padding: 6px;
  border-bottom: 1px solid #ddd;
}
th {
  background: #eee;
}
input {
  width: 60px;
}
.commande {
  font-weight: bold;
  color: #c00000;
}
button {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  margin: 10px 0;
}
.hidden {
  display: none;
}
</style>
</head>

<body>

<h1>Commande COMO</h1>

<button onclick="toggleCommande()">Voir uniquement la commande</button>

<div id="contenu"></div>

<script>
const data = {
  "JUS": [
    "A.MILLIAT CITRONNADE GINGEMBRE",
    "A.MILLIAT FRAISE 33CLS VP X12",
    "A.MILLIAT JUS ORANGE 1LT VP X6",
    "A.MILLIAT JUS POMME 1LT VP X6",
    "A.MILLIAT MANGUE 33CLS VP X12",
    "A.MILLIAT ORANGE 33CLS VP X12"
  ],
  "SOFTS": [
    "COCA COLA 33CLS",
    "COCA ZERO 33CLS",
    "PERRIER 75CLS",
    "SAN PELLEGRINO 75CLS",
    "RED BULL 25CLS"
  ],
  "VINS": [
    "BEAUJOLAIS 75CL",
    "CHABLIS 75CL",
    "ROSÉ DE L'ÉTÉ 75CL"
  ],
  "FÛTS": [
    "FUT 20L 1664 BLANC",
    "FUT 20L GOUDALE IPA",
    "FUT 30L SAINT-OMER"
  ],
  "ALCOOLS FORTS": [
    "VODKA SMIRNOFF 70CL",
    "RHUM CAPTAIN MORGAN",
    "GIN GORDON'S"
  ]
};

let filtre = false;
const container = document.getElementById("contenu");

for (const categorie in data) {
  const h2 = document.createElement("h2");
  h2.textContent = categorie;
  container.appendChild(h2);

  const table = document.createElement("table");
  table.innerHTML = `
    <thead>
      <tr>
        <th>Produit</th>
        <th>Stock</th>
        <th>Ventes</th>
        <th>Seuil</th>
        <th>À commander</th>
      </tr>
    </thead>
    <tbody></tbody>
  `;
  container.appendChild(table);

  const tbody = table.querySelector("tbody");

  data[categorie].forEach(p => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${p}</td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td class="commande">0</td>
    `;
    tbody.appendChild(tr);
  });
}

function calculer() {
  document.querySelectorAll("tbody tr").forEach(tr => {
    const i = tr.querySelectorAll("input");
    const stock = +i[0].value;
    const ventes = +i[1].value;
    const seuil = +i[2].value;
    const aCommander = Math.max(0, ventes + seuil - stock);
    tr.querySelector(".commande").textContent = aCommander;
    tr.style.display = aCommander > 0 || !filtre ? "" : "none";
  });
}

function toggleCommande() {
  filtre = !filtre;
  calculer();
}

document.addEventListener("input", calculer);
</script>

</body>
</html>

