<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Commande COMO</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f4f4f4;
  margin: 0;
  padding: 10px;
}
h1 {
  text-align: center;
}
h2 {
  background: #222;
  color: #fff;
  padding: 6px;
  margin-top: 20px;
  font-size: 16px;
}
table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  font-size: 14px;
}
th, td {
  padding: 6px;
  border-bottom: 1px solid #ddd;
}
th {
  background: #eee;
}
input {
  width: 60px;
}
.commande {
  font-weight: bold;
  color: #c00000;
}
button {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  margin: 10px 0;
}
</style>
</head>

<body>

<h1>Commande COMO</h1>
<button onclick="toggleCommande()">Voir uniquement la commande</button>

<div id="app"></div>

<script>
// =========================
// PRODUITS PAR CATÉGORIE
// =========================
const data = {

"FÛTS": [
  "FUT 30L SAINT OMER",
  "FUT 20L GOUDALE BLANC",
  "FUT 20L GOUDALE IPA",
  "FUT 20L LIMONADE GOUDALE",
  "TUBE CO2 10KG"
],

"CHAMPAGNE & BULLES": [
  "CHAMPAGNE H BEAUGRAND",
  "PROSECCO RICCADONNA"
],

"VINS": [
  "PIVE ROSE DOMAINE",
  "CHARDONNAY",
  "CHABLIS",
  "LA TERRIENNE BLANC",
  "LOUP BERGERIE ROUGE"
],

"ALCOOLS FORTS": [
  "GIN GORDONS",
  "RHUM 3 RIVIERES",
  "CAPTAIN MORGAN GOLD",
  "CAPTAIN MORGAN BLANC",
  "VODKA SMIRNOFF",
  "GET 27"
],

"SOFTS": [
  "CARLSBERG",
  "COCA COLA",
  "COCA ZERO",
  "EAU NEUVE",
  "ICE TEA",
  "PERRIER 75CL",
  "PERRIER 33CL",
  "RED BULL"
]
};

// =========================
// RÈGLES DE COMMANDE AUTO
// =========================
const commandesAuto = {
  "FUT 30L SAINT OMER": 24,
  "FUT 20L GOUDALE BLANC": 15,
  "FUT 20L GOUDALE IPA": 15,
  "FUT 20L LIMONADE GOUDALE": 4,
  "TUBE CO2 10KG": 3,

  "CHAMPAGNE H BEAUGRAND": 6,
  "PROSECCO RICCADONNA": 15,

  "PIVE ROSE DOMAINE": 30,
  "CHARDONNAY": 35,
  "CHABLIS": 15,
  "LA TERRIENNE BLANC": 10,

  "GIN GORDONS": 6,
  "RHUM 3 RIVIERES": 6,
  "CAPTAIN MORGAN GOLD": 10,
  "CAPTAIN MORGAN BLANC": 10,
  "VODKA SMIRNOFF": 10,
  "GET 27": 4,

  "CARLSBERG": 8,
  "COCA COLA": 20,
  "COCA ZERO": 20,
  "EAU NEUVE": 15,
  "ICE TEA": 4,
  "PERRIER 75CL": 7,
  "PERRIER 33CL": 15,
  "RED BULL": 12,

  "LOUP BERGERIE ROUGE": 2
};

// =========================
// GÉNÉRATION DE L'APP
// =========================
let filtre = false;
const app = document.getElementById("app");

for (const cat in data) {
  const h2 = document.createElement("h2");
  h2.textContent = cat;
  app.appendChild(h2);

  const table = document.createElement("table");
  table.innerHTML = `
    <thead>
      <tr>
        <th>Produit</th>
        <th>Stock</th>
        <th>À commander</th>
      </tr>
    </thead>
    <tbody></tbody>
  `;
  app.appendChild(table);

  const tbody = table.querySelector("tbody");

  data[cat].forEach(p => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${p}</td>
      <td><input type="number" value="0" min="0"></td>
      <td class="commande">0</td>
    `;
    tbody.appendChild(tr);
  });
}

// =========================
// CALCUL
// =========================
function calculer() {
  document.querySelectorAll("tbody tr").forEach(tr => {
    const produit = tr.children[0].textContent.trim();
    const stock = +tr.querySelector("input").value;

    let aCommander = 0;
    if (stock === 0 && commandesAuto[produit]) {
      aCommander = commandesAuto[produit];
    }

    tr.querySelector(".commande").textContent = aCommander;
    tr.style.display = aCommander > 0 || !filtre ? "" : "none";
  });
}

function toggleCommande() {
  filtre = !filtre;
  calculer();
}

document.addEventListener("input", calculer);
</script>

</body>
</html>
