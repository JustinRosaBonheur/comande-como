<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Commande COMO</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f4f4f4;
  margin: 0;
  padding: 10px;
}
h1 { text-align: center; }
h2 {
  background: #222;
  color: #fff;
  padding: 8px;
  margin-top: 25px;
  font-size: 16px;
}
table {
  width: 100%;
  border-collapse: collapse;
  background: white;
}
th, td {
  padding: 8px;
  border-bottom: 1px solid #ddd;
  text-align: center;
}
th { background: #eee; }
td:first-child { text-align: left; }
input { width: 60px; text-align: center; }
.commande { font-weight: bold; color: #c00000; }
</style>
</head>

<body>

<h1>Commande COMO</h1>
<div id="app"></div>

<script>
// =========================
// PRODUITS (LISTE COMPLÈTE)
// =========================
const data = {
"FÛTS": [
"FUT 30 LT SAINT OMER",
"FUT 20 LT GOUDALE BLANC",
"FUT 20 LT GOUDALE IPA",
"FUT 20 LT LIMONADE GOUDALE",
"TUBE CO2 10KG"
],

"VINS & BULLES": [
"CHAMPAGNE H BEAUGRAND",
"PROSECCO RICCADONNA",
"PIVE ROSE DOMAINE",
"CHARDONNAY",
"CHABLIS",
"LA TERRIENNE BLANC",
"LOUP BERGERIE ROUGE",
"SANS CHICHI ROUGE"
],

"ALCOOLS FORTS": [
"GIN GORDONS",
"RHUM 3 RIVIERES",
"CAPTAIN MORGAN GOLD",
"CAPTAIN MORGAN BLANC",
"VODKA SMIRNOFF",
"GET 27",
"JOHNNIE WALKER RED",
"ABSOLUT"
],

"SOFTS": [
"CARLSBERG",
"COCA COLA",
"COCA ZERO",
"EAU NEUVE",
"ICE TEA",
"PERRIER 75CL",
"PERRIER 33CL",
"RED BULL",
"SAN PELLEGRINO",
"ACQUA PANNA"
],

"JUS & SIROPS": [
"A.MILLIAT ORANGE",
"A.MILLIAT POMME",
"A.MILLIAT PECHE",
"A.MILLIAT MANGUE",
"BRIQUE ORANGE",
"BRIQUE POMME",
"MONIN FRAISE",
"MONIN VANILLE",
"MONIN CARAMEL"
],

"AUTRES": [
"INFUSION CITRON GINGEMBRE",
"INFUSION FRAMBOISE MENTHE",
"LDP PARIS GINGER BEER",
"MARTINI BLANC",
"MARTINI ROUGE",
"JADE",
"SUCRE BUCHETTES",
"CAFE GOURMET"
]
};

// =========================
// RÈGLES DE COMMANDE
// =========================
function regleCommande(produit) {

  // FÛTS
  if (produit.includes("SAINT OMER")) return 24;
  if (produit.includes("GOUDALE BLANC")) return 15;
  if (produit.includes("GOUDALE IPA")) return 15;
  if (produit.includes("LIMONADE GOUDALE")) return 4;
  if (produit.includes("CO2")) return 3;

  // BULLES & VINS
  if (produit.includes("BEAUGRAND")) return 6;
  if (produit.includes("PROSECCO")) return 15;
  if (produit.includes("PIVE ROSE")) return 30;
  if (produit.includes("CHARDONNAY")) return 35;
  if (produit.includes("CHABLIS")) return 15;
  if (produit.includes("TERRIENNE")) return 10;
  if (produit.includes("LOUP BERGERIE ROUGE")) return 2;
  if (produit.includes("SANS CHICHI")) return 6;

  // ALCOOLS
  if (produit.includes("GIN")) return 6;
  if (produit.includes("3 RIVIERES")) return 6;
  if (produit.includes("CAPTAIN MORGAN GOLD")) return 10;
  if (produit.includes("CAPTAIN MORGAN BLANC")) return 10;
  if (produit.includes("SMIRNOFF")) return 10;
  if (produit.includes("GET 27")) return 4;
  if (produit.includes("JOHNNIE")) return 6;
  if (produit.includes("ABSOLUT")) return 5;

  // SOFTS
  if (produit.includes("CARLSBERG")) return 8;
  if (produit.includes("COCA COLA")) return 20;
  if (produit.includes("COCA ZERO")) return 20;
  if (produit.includes("EAU NEUVE")) return 15;
  if (produit.includes("ICE TEA")) return 4;
  if (produit.includes("PERRIER 75")) return 7;
  if (produit.includes("PERRIER 33")) return 15;
  if (produit.includes("RED BULL")) return 12;
  if (produit.includes("SAN PELLEGRINO")) return 2;
  if (produit.includes("ACQUA PANNA")) return 2;

  // RÈGLES GÉNÉRALES
  if (produit.includes("A.MILLIAT")) return 1;
  if (produit.includes("BRIQUE")) return 2;
  if (produit.includes("MONIN")) return 1;
  if (produit.includes("INFUSION CITRON")) return 2;
  if (produit.includes("INFUSION FRAMBOISE")) return 1;
  if (produit.includes("GINGER BEER")) return 4;
  if (produit.includes("MARTINI")) return 1;
  if (produit.includes("JADE")) return 2;
  if (produit.includes("SUCRE")) return 2;
  if (produit.includes("CAFE")) return 4;

  return 0;
}

// =========================
// UI + CALCUL
// =========================
const app = document.getElementById("app");

for (const cat in data) {
  const h2 = document.createElement("h2");
  h2.textContent = cat;
  app.appendChild(h2);

  const table = document.createElement("table");
  table.innerHTML = `
    <thead>
      <tr>
        <th>Produit</th>
        <th>Stock</th>
        <th>À commander</th>
      </tr>
    </thead>
    <tbody></tbody>
  `;
  app.appendChild(table);

  const tbody = table.querySelector("tbody");

  data[cat].forEach(p => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${p}</td>
      <td><input type="number" value="0" min="0"></td>
      <td class="commande">0</td>
    `;
    tbody.appendChild(tr);
  });
}

document.addEventListener("input", () => {
  document.querySelectorAll("tbody tr").forEach(tr => {
    const produit = tr.children[0].textContent;
    const stock = Number(tr.querySelector("input").value) || 0;
    const qte = stock === 0 ? regleCommande(produit) : 0;
    tr.querySelector(".commande").textContent = qte;
  });
});
</script>

</body>
</html>
